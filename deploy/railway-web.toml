# ARKAINBRAIN â€” Web Service (Railway)
# Serves the Flask dashboard, API, and SSE log streams.
# 2 vCPU / 4 GB RAM / 2 replicas for production.

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "gunicorn web_app:app --bind 0.0.0.0:$PORT --workers 2 --threads 8 --timeout 300 --graceful-timeout 30 --keep-alive 5 --max-requests 1000 --max-requests-jitter 50"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 5
numReplicas = 2
healthcheckPath = "/health"
healthcheckTimeout = 5

[deploy.resources]
cpuLimit = 2
memoryLimit = "4Gi"
